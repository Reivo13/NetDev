<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
  crossorigin="anonymous"></script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<script>
  function toggleConfirm(slug) {
    const form = document.getElementById('confirm-' + slug);
    if (form.style.display === "none") {
      form.style.display = "block";
    } else {
      form.style.display = "none";
    }
  }
</script>

<script>
  const allModals = document.querySelectorAll('.modal');
  
  allModals.forEach(modal => {
    modal.addEventListener('show.bs.modal', function () {
      allModals.forEach(m => {
        if (m !== modal) {
          const bsModal = bootstrap.Modal.getInstance(m);
          if (bsModal) bsModal.hide();
        }
      });
    });
  });
</script>

<!-- untuk auto close alert-->
<script>
  setTimeout(function () {
    let alerts = document.querySelectorAll('.alert');
    alerts.forEach(function(alert) {
      let bsAlert = new bootstrap.Alert(alert);
      bsAlert.close();
    });
  }, 3500); // 3500ms = 3.5 detik
</script>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
  $(document).ready(function () {
    $('.form-update-obat').on('submit', function (e) {
      e.preventDefault();

      const form = $(this)[0];
      const formData = new FormData(form);
      const url = $(this).attr('action');
      const slug = $(this).data('slug');

      $.ajax({
        url: url,
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function () {
          $('#updateModal-' + slug).modal('hide');

          // Menampilkan alert atau langsung refresh list obat
          alert('Obat berhasil diupdate!');
          location.reload(); // atau update DOM-nya langsung jika tidak mau reload seluruh halaman
        },
        error: function (xhr) {
          alert('Gagal mengupdate obat.');
          console.log(xhr.responseText);
        }
      });
    });
  });
</script>

